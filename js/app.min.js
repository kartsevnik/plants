(() => { "use strict"; let e = (e, t = 500, s = 0) => { e.classList.contains("_slide") || (e.classList.add("_slide"), e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = `${e.offsetHeight}px`, e.offsetHeight, e.style.overflow = "hidden", e.style.height = s ? `${s}px` : "0px", e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, window.setTimeout((() => { e.hidden = !s, !s && e.style.removeProperty("height"), e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), !s && e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property"), e.classList.remove("_slide") }), t)) }, t = (e, t = 500, s = 0) => { if (!e.classList.contains("_slide")) { e.classList.add("_slide"), e.hidden = !e.hidden && null, s && e.style.removeProperty("height"); let l = e.offsetHeight; e.style.overflow = "hidden", e.style.height = s ? `${s}px` : "0px", e.style.paddingTop = 0, e.style.paddingBottom = 0, e.style.marginTop = 0, e.style.marginBottom = 0, e.offsetHeight, e.style.transitionProperty = "height, margin, padding", e.style.transitionDuration = t + "ms", e.style.height = l + "px", e.style.removeProperty("padding-top"), e.style.removeProperty("padding-bottom"), e.style.removeProperty("margin-top"), e.style.removeProperty("margin-bottom"), window.setTimeout((() => { e.style.removeProperty("height"), e.style.removeProperty("overflow"), e.style.removeProperty("transition-duration"), e.style.removeProperty("transition-property"), e.classList.remove("_slide") }), t) } }, s = (s, l = 500) => s.hidden ? t(s, l) : e(s, l), l = !0, c = (e = 500) => { let t = document.querySelector("body"); if (l) { let s = document.querySelectorAll("[data-lp]"); setTimeout((() => { for (let e = 0; e < s.length; e++) { s[e].style.paddingRight = "0px" } t.style.paddingRight = "0px", document.documentElement.classList.remove("lock") }), e), l = !1, setTimeout((function () { l = !0 }), e) } }, a = (e = 500) => { let t = document.querySelector("body"); if (l) { let s = document.querySelectorAll("[data-lp]"); for (let e = 0; e < s.length; e++) { s[e].style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px" } t.style.paddingRight = window.innerWidth - document.querySelector(".wrapper").offsetWidth + "px", document.documentElement.classList.add("lock"), l = !1, setTimeout((function () { l = !0 }), e) } }; function i(e, t) { const s = Array.from(e).filter((function (e, s, l) { if (e.dataset[t]) return e.dataset[t].split(",")[0] })); if (s.length) { const e = []; s.forEach((s => { const l = {}, c = s.dataset[t].split(","); l.value = c[0], l.type = c[1] ? c[1].trim() : "max", l.item = s, e.push(l) })); let l = e.map((function (e) { return "(" + e.type + "-width: " + e.value + "px)," + e.value + "," + e.type })); l = function (e) { return e.filter((function (e, t, s) { return s.indexOf(e) === t })) }(l); const c = []; if (l.length) return l.forEach((t => { const s = t.split(","), l = s[1], a = s[2], i = window.matchMedia(s[0]), n = e.filter((function (e) { if (e.value === l && e.type === a) return !0 })); c.push({ itemsArray: n, matchMedia: i }) })), c } } class n { constructor(e, t = null) { if (this.config = Object.assign({ init: !0, logging: !0 }, e), this.selectClasses = { classSelect: "select", classSelectBody: "select__body", classSelectTitle: "select__title", classSelectValue: "select__value", classSelectLabel: "select__label", classSelectInput: "select__input", classSelectText: "select__text", classSelectLink: "select__link", classSelectOptions: "select__options", classSelectOptionsScroll: "select__scroll", classSelectOption: "select__option", classSelectContent: "select__content", classSelectRow: "select__row", classSelectData: "select__asset", classSelectDisabled: "_select-disabled", classSelectTag: "_select-tag", classSelectOpen: "_select-open", classSelectActive: "_select-active", classSelectFocus: "_select-focus", classSelectMultiple: "_select-multiple", classSelectCheckBox: "_select-checkbox", classSelectOptionSelected: "_select-selected" }, this._this = this, this.config.init) { const e = t ? document.querySelectorAll(t) : document.querySelectorAll("select"); e.length ? (this.selectsInit(e), this.setLogging(`Проснулся, построил селектов: (${e.length})`)) : this.setLogging("Сплю, нет ни одного select zzZZZzZZz") } } getSelectClass(e) { return `.${e}` } getSelectElement(e, t) { return { originalSelect: e.querySelector("select"), selectElement: e.querySelector(this.getSelectClass(t)) } } selectsInit(e) { e.forEach(((e, t) => { this.selectInit(e, t + 1) })), document.addEventListener("click", function (e) { this.selectsActions(e) }.bind(this)), document.addEventListener("keydown", function (e) { this.selectsActions(e) }.bind(this)), document.addEventListener("focusin", function (e) { this.selectsActions(e) }.bind(this)), document.addEventListener("focusout", function (e) { this.selectsActions(e) }.bind(this)) } selectInit(e, t) { const s = this; let l = document.createElement("div"); if (l.classList.add(this.selectClasses.classSelect), e.parentNode.insertBefore(l, e), l.appendChild(e), e.hidden = !0, t && (e.dataset.id = t), l.insertAdjacentHTML("beforeend", `<div class="${this.selectClasses.classSelectBody}"><div hidden class="${this.selectClasses.classSelectOptions}"></div></div>`), this.selectBuild(e), this.getSelectPlaceholder(e) && (e.dataset.placeholder = this.getSelectPlaceholder(e).value, this.getSelectPlaceholder(e).label.show)) { this.getSelectElement(l, this.selectClasses.classSelectTitle).selectElement.insertAdjacentHTML("afterbegin", `<span class="${this.selectClasses.classSelectLabel}">${this.getSelectPlaceholder(e).label.text ? this.getSelectPlaceholder(e).label.text : this.getSelectPlaceholder(e).value}</span>`) } e.dataset.speed = e.dataset.speed ? e.dataset.speed : "150", e.addEventListener("change", (function (e) { s.selectChange(e) })) } selectBuild(e) { const t = e.parentElement; t.dataset.id = e.dataset.id, t.classList.add(e.getAttribute("class") ? `select_${e.getAttribute("class")}` : ""), e.multiple ? t.classList.add(this.selectClasses.classSelectMultiple) : t.classList.remove(this.selectClasses.classSelectMultiple), e.hasAttribute("data-checkbox") && e.multiple ? t.classList.add(this.selectClasses.classSelectCheckBox) : t.classList.remove(this.selectClasses.classSelectCheckBox), this.setSelectTitleValue(t, e), this.setOptions(t, e), e.hasAttribute("data-search") && this.searchActions(t), e.hasAttribute("data-open") && this.selectAction(t), this.selectDisabled(t, e) } selectsActions(e) { const t = e.target, s = e.type; if (t.closest(this.getSelectClass(this.selectClasses.classSelect)) || t.closest(this.getSelectClass(this.selectClasses.classSelectTag))) { const l = t.closest(".select") ? t.closest(".select") : document.querySelector(`.${this.selectClasses.classSelect}[data-id="${t.closest(this.getSelectClass(this.selectClasses.classSelectTag)).dataset.selectId}"]`), c = this.getSelectElement(l).originalSelect; if ("click" === s) { if (!c.disabled) if (t.closest(this.getSelectClass(this.selectClasses.classSelectTag))) { const e = t.closest(this.getSelectClass(this.selectClasses.classSelectTag)), s = document.querySelector(`.${this.selectClasses.classSelect}[data-id="${e.dataset.selectId}"] .select__option[data-value="${e.dataset.value}"]`); this.optionAction(l, c, s) } else if (t.closest(this.getSelectClass(this.selectClasses.classSelectTitle))) this.selectAction(l); else if (t.closest(this.getSelectClass(this.selectClasses.classSelectOption))) { const e = t.closest(this.getSelectClass(this.selectClasses.classSelectOption)); this.optionAction(l, c, e) } } else "focusin" === s || "focusout" === s ? t.closest(this.getSelectClass(this.selectClasses.classSelect)) && ("focusin" === s ? l.classList.add(this.selectClasses.classSelectFocus) : l.classList.remove(this.selectClasses.classSelectFocus)) : "keydown" === s && "Escape" === e.code && this.selectsСlose() } else this.selectsСlose() } selectsСlose() { const e = document.querySelectorAll(`${this.getSelectClass(this.selectClasses.classSelect)}${this.getSelectClass(this.selectClasses.classSelectOpen)}`); e.length && e.forEach((e => { this.selectAction(e) })) } selectAction(e) { const t = this.getSelectElement(e).originalSelect, l = this.getSelectElement(e, this.selectClasses.classSelectOptions).selectElement; l.classList.contains("_slide") || (e.classList.toggle(this.selectClasses.classSelectOpen), s(l, t.dataset.speed)) } setSelectTitleValue(e, t) { const s = this.getSelectElement(e, this.selectClasses.classSelectBody).selectElement, l = this.getSelectElement(e, this.selectClasses.classSelectTitle).selectElement; l && l.remove(), s.insertAdjacentHTML("afterbegin", this.getSelectTitleValue(e, t)) } getSelectTitleValue(e, t) { let s = this.getSelectedOptionsData(t, 2).html; if (t.multiple && t.hasAttribute("data-tags") && (s = this.getSelectedOptionsData(t).elements.map((t => `<span role="button" data-select-id="${e.dataset.id}" data-value="${t.value}" class="_select-tag">${this.getSelectElementContent(t)}</span>`)).join(""), t.dataset.tags && document.querySelector(t.dataset.tags) && (document.querySelector(t.dataset.tags).innerHTML = s, t.hasAttribute("data-search") && (s = !1))), s = s.length ? s : t.dataset.placeholder, this.getSelectedOptionsData(t).values.length ? e.classList.add(this.selectClasses.classSelectActive) : e.classList.remove(this.selectClasses.classSelectActive), t.hasAttribute("data-search")) return `<div class="${this.selectClasses.classSelectTitle}"><span class="${this.selectClasses.classSelectValue}"><input autocomplete="off" type="text" placeholder="${s}" data-placeholder="${s}" class="${this.selectClasses.classSelectInput}"></span></div>`; { const e = this.getSelectedOptionsData(t).elements.length && this.getSelectedOptionsData(t).elements[0].dataset.class ? ` ${this.getSelectedOptionsData(t).elements[0].dataset.class}` : ""; return `<button type="button" class="${this.selectClasses.classSelectTitle}"><span class="${this.selectClasses.classSelectValue}"><span class="${this.selectClasses.classSelectContent}${e}">${s}</span></span></button>` } } getSelectElementContent(e) { const t = e.dataset.asset ? `${e.dataset.asset}` : "", s = t.indexOf("img") >= 0 ? `<img src="${t}" alt="">` : t; let l = ""; return l += t ? `<span class="${this.selectClasses.classSelectRow}">` : "", l += t ? `<span class="${this.selectClasses.classSelectData}">` : "", l += t ? s : "", l += t ? "</span>" : "", l += t ? `<span class="${this.selectClasses.classSelectText}">` : "", l += e.textContent, l += t ? "</span>" : "", l += t ? "</span>" : "", l } getSelectPlaceholder(e) { const t = Array.from(e.options).find((e => !e.value)); if (t) return { value: t.textContent, show: t.hasAttribute("data-show"), label: { show: t.hasAttribute("data-label"), text: t.dataset.label } } } getSelectedOptionsData(e, t) { let s = []; return e.multiple ? s = Array.from(e.options).filter((e => e.value)).filter((e => e.selected)) : s.push(e.options[e.selectedIndex]), { elements: s.map((e => e)), values: s.filter((e => e.value)).map((e => e.value)), html: s.map((e => this.getSelectElementContent(e))) } } getOptions(e) { let t = e.hasAttribute("data-scroll") ? "data-simplebar" : "", s = e.dataset.scroll ? `style="max-height:${e.dataset.scroll}px"` : "", l = Array.from(e.options); if (l.length > 0) { let c = ""; return (this.getSelectPlaceholder(e) && !this.getSelectPlaceholder(e).show || e.multiple) && (l = l.filter((e => e.value))), c += t ? `<div ${t} ${s} class="${this.selectClasses.classSelectOptionsScroll}">` : "", l.forEach((t => { c += this.getOption(t, e) })), c += t ? "</div>" : "", c } } getOption(e, t) { const s = e.selected && t.multiple ? ` ${this.selectClasses.classSelectOptionSelected}` : "", l = e.selected && !t.hasAttribute("data-show-selected") ? "hidden" : "", c = e.dataset.class ? ` ${e.dataset.class}` : "", a = !!e.dataset.href && e.dataset.href, i = e.hasAttribute("data-href-blank") ? 'target="_blank"' : ""; let n = ""; return n += a ? `<a ${i} ${l} href="${a}" data-value="${e.value}" class="${this.selectClasses.classSelectOption}${c}${s}">` : `<button ${l} class="${this.selectClasses.classSelectOption}${c}${s}" data-value="${e.value}" type="button">`, n += this.getSelectElementContent(e), n += a ? "</a>" : "</button>", n } setOptions(e, t) { this.getSelectElement(e, this.selectClasses.classSelectOptions).selectElement.innerHTML = this.getOptions(t) } optionAction(e, t, s) { if (t.multiple) { s.classList.toggle(this.selectClasses.classSelectOptionSelected); this.getSelectedOptionsData(t).elements.forEach((e => { e.removeAttribute("selected") })); e.querySelectorAll(this.getSelectClass(this.selectClasses.classSelectOptionSelected)).forEach((e => { t.querySelector(`option[value="${e.dataset.value}"]`).setAttribute("selected", "selected") })) } else t.hasAttribute("data-show-selected") || (e.querySelector(`${this.getSelectClass(this.selectClasses.classSelectOption)}[hidden]`) && (e.querySelector(`${this.getSelectClass(this.selectClasses.classSelectOption)}[hidden]`).hidden = !1), s.hidden = !0), t.value = s.hasAttribute("data-value") ? s.dataset.value : s.textContent, this.selectAction(e); this.setSelectTitleValue(e, t), this.setSelectChange(t) } selectChange(e) { const t = e.target; this.selectBuild(t), this.setSelectChange(t) } setSelectChange(e) { if (e.hasAttribute("data-validate") && r.validateInput(e), e.hasAttribute("data-submit") && e.value) { let t = document.createElement("button"); t.type = "submit", e.closest("form").append(t), t.click(), t.remove() } const t = e.parentElement; this.selectCallback(t, e) } selectDisabled(e, t) { t.disabled ? (e.classList.add(this.selectClasses.classSelectDisabled), this.getSelectElement(e, this.selectClasses.classSelectTitle).selectElement.disabled = !0) : (e.classList.remove(this.selectClasses.classSelectDisabled), this.getSelectElement(e, this.selectClasses.classSelectTitle).selectElement.disabled = !1) } searchActions(e) { this.getSelectElement(e).originalSelect; const t = this.getSelectElement(e, this.selectClasses.classSelectInput).selectElement, s = this.getSelectElement(e, this.selectClasses.classSelectOptions).selectElement, l = s.querySelectorAll(`.${this.selectClasses.classSelectOption}`), c = this; t.addEventListener("input", (function () { l.forEach((e => { e.textContent.toUpperCase().indexOf(t.value.toUpperCase()) >= 0 ? e.hidden = !1 : e.hidden = !0 })), !0 === s.hidden && c.selectAction(e) })) } selectCallback(e, t) { document.dispatchEvent(new CustomEvent("selectCallback", { detail: { select: t } })) } setLogging(e) { this.config.logging && function (e) { setTimeout((() => { window.FLS && console.log(e) }), 0) }(`[select]: ${e}`) } } const o = { inputMaskModule: null, selectModule: null }; let r = { getErrors(e) { let t = 0, s = e.querySelectorAll("*[data-required]"); return s.length && s.forEach((e => { null === e.offsetParent && "SELECT" !== e.tagName || e.disabled || (t += this.validateInput(e)) })), t }, validateInput(e) { let t = 0; return "email" === e.dataset.required ? (e.value = e.value.replace(" ", ""), this.emailTest(e) ? (this.addError(e), t++) : this.removeError(e)) : ("checkbox" !== e.type || e.checked) && e.value ? this.removeError(e) : (this.addError(e), t++), t }, addError(e) { e.classList.add("_form-error"), e.parentElement.classList.add("_form-error"); let t = e.parentElement.querySelector(".form__error"); t && e.parentElement.removeChild(t), e.dataset.error && e.parentElement.insertAdjacentHTML("beforeend", `<div class="form__error">${e.dataset.error}</div>`) }, removeError(e) { e.classList.remove("_form-error"), e.parentElement.classList.remove("_form-error"), e.parentElement.querySelector(".form__error") && e.parentElement.removeChild(e.parentElement.querySelector(".form__error")) }, formClean(e) { e.reset(), setTimeout((() => { let t = e.querySelectorAll("input,textarea"); for (let e = 0; e < t.length; e++) { const s = t[e]; s.parentElement.classList.remove("_form-focus"), s.classList.remove("_form-focus"), r.removeError(s), s.value = s.dataset.placeholder } let s = e.querySelectorAll(".checkbox__input"); if (s.length > 0) for (let e = 0; e < s.length; e++) { s[e].checked = !1 } if (o.selectModule) { let t = e.querySelectorAll(".select"); if (t.length) for (let e = 0; e < t.length; e++) { const s = t[e].querySelector("select"); o.selectModule.selectBuild(s) } } }), 0) }, emailTest: e => !/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value) }; let d = !1; setTimeout((() => { if (d) { let e = new Event("windowScroll"); window.addEventListener("scroll", (function (t) { document.dispatchEvent(e) })) } }), 0), document.querySelector(".city-1").style.display = "none", document.querySelector(".city-2").style.display = "none", document.querySelector(".city-3").style.display = "none", document.querySelector(".city-4").style.display = "none", document.addEventListener("click", (function (e) { if (e.target.closest(".js-city-1")) return void (document.querySelector(".city-1").style.display = ""); document.querySelector(".city-1").style.display = "none" })), document.addEventListener("click", (function (e) { e.target.closest(".js-city-2") ? document.querySelector(".city-2").style.display = "" : document.querySelector(".city-2").style.display = "none" })), document.addEventListener("click", (function (e) { e.target.closest(".js-city-3") ? document.querySelector(".city-3").style.display = "" : document.querySelector(".city-3").style.display = "none" })), document.addEventListener("click", (function (e) { e.target.closest(".js-city-4") ? document.querySelector(".city-4").style.display = "" : document.querySelector(".city-4").style.display = "none" })), window.FLS = !1, function (e) { let t = new Image; t.onload = t.onerror = function () { e(2 == t.height) }, t.src = "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA" }((function (e) { let t = !0 === e ? "webp" : "no-webp"; document.documentElement.classList.add(t) })), function () { let e = document.querySelector(".icon-menu"); e && e.addEventListener("click", (function (e) { l && (((e = 500) => { document.documentElement.classList.contains("lock") ? c(e) : a(e) })(), document.documentElement.classList.toggle("menu-open")) })) }(), function () { const t = document.querySelectorAll("[data-spollers]"); if (t.length > 0) { const l = Array.from(t).filter((function (e, t, s) { return !e.dataset.spollers.split(",")[0] })); l.length && a(l); let c = i(t, "spollers"); function a(e, t = !1) { e.forEach((e => { e = t ? e.item : e, t.matches || !t ? (e.classList.add("_spoller-init"), n(e), e.addEventListener("click", o)) : (e.classList.remove("_spoller-init"), n(e, !1), e.removeEventListener("click", o)) })) } function n(e, t = !0) { const s = e.querySelectorAll("[data-spoller]"); s.length > 0 && s.forEach((e => { t ? (e.removeAttribute("tabindex"), e.classList.contains("_spoller-active") || (e.nextElementSibling.hidden = !0)) : (e.setAttribute("tabindex", "-1"), e.nextElementSibling.hidden = !1) })) } function o(e) { const t = e.target; if (t.closest("[data-spoller]")) { const l = t.closest("[data-spoller]"), c = l.closest("[data-spollers]"), a = !!c.hasAttribute("data-one-spoller"); c.querySelectorAll("._slide").length || (a && !l.classList.contains("_spoller-active") && r(c), l.classList.toggle("_spoller-active"), s(l.nextElementSibling, 500)), e.preventDefault() } } function r(t) { const s = t.querySelector("[data-spoller]._spoller-active"); s && (s.classList.remove("_spoller-active"), e(s.nextElementSibling, 500)) } c && c.length && c.forEach((e => { e.matchMedia.addEventListener("change", (function () { a(e.itemsArray, e.matchMedia) })), a(e.itemsArray, e.matchMedia) })) } }(), o.selectModule = new n({}) })(); console.log("Итого - 100 баллов: Вёрстка валидная +10, Вёрстка семантическая +20, Вёрстка соответствует макету +48,Требования к css + 12, Интерактивность, реализуемая через css +20");